{% extends "base.html" %}

{% block content %}
    <img src="{{ url_for('static', filename='banner-home.png') }}" alt="Cafejojo's Darts Ranking Logo" class="logo">    
    
    <h2><i class="fas fa-ranking-star"></i> Current Rankings</h2>
    <table class="ranking-table">
        <thead>
        <tr>
            <th><i class="fas fa-medal"></i> Rank</th>
            <th><i class="fas fa-user"></i> Username</th>
            <th><i class="fas fa-bullseye"></i> 180's</th>
            <th><i class="fas fa-trophy"></i> Highest Finish</th>
            <th><i class="fas fa-chart-line"></i> ELO Rating</th>
        </tr>
        </thead>
        <tbody>
        {% for user in users %}
        <tr>
            <td>{{ loop.index }}</td>
            <td><strong>{{ user.username }}</strong></td>
            <td>{{ user.one_eighties or 0 }}</td>
            <td>
                {% if user.highest_finish %}
                    <span style="background: var(--accent-color); color: white; padding: 0.3em 0.8em; border-radius: 15px; font-weight: 600;">
                        {{ user.highest_finish }}
                    </span>
                {% else %}
                    <span style="color: #999;">-</span>
                {% endif %}
            </td>
            <td><strong style="font-size: 1.1em; color: var(--text-primary);">{{ user.elo }}</strong></td>
        </tr>
        {% endfor %}
        </tbody>
    </table>

    <div class="description">
        <h3><i class="fas fa-info-circle"></i> About Cafejojo's Darts Ranking</h3>
        <p>De website darts.cafejojo.nl is het online platform voor de Caf√©jojo's Darts Ranking. Spelers kunnen zich registreren, meedoen aan wedstrijden en hun voortgang volgen. Het systeem gebruikt een Elo-ranking om prestaties eerlijk te vergelijken, waarbij je punten wint of verliest op basis van je tegenstander en het wedstrijdresultaat. De site biedt een overzicht van ranglijsten, persoonlijke statistieken.</p>
    </div>

    <h2><i class="fas fa-clock"></i> Last 10 Matches</h2>
    <table>
        <thead>
        <tr>
            <th><i class="far fa-calendar"></i> Date</th>
            <th><i class="fas fa-crown"></i> Winner</th>
            <th><i class="fas fa-times-circle"></i> Loser</th>
            <th><i class="fas fa-arrow-up"></i> Winner ELO Gain</th>
            <th><i class="fas fa-arrow-down"></i> Loser ELO Loss</th>
            <th><i class="fas fa-user-check"></i> Recorded By</th>
        </tr>
        </thead>
        <tbody>
        {% for match in matches %}
        <tr>
            <td>{{ match.date_played.strftime('%Y-%m-%d %H:%M') }}</td>
            <td><strong style="color: var(--success-color);">{{ match.winner.username }}</strong></td>
            <td style="color: var(--text-secondary);">{{ match.loser.username }}</td>
            <td class="positive">+{{ match.winner_elo_gain }}</td>
            <td class="negative">{{ match.loser_elo_loss }}</td>
            <td style="font-style: italic; color: var(--text-secondary);">{{ match.recorder.username if match.recorder else 'N/A' }}</td>
        </tr>
        {% endfor %}
        </tbody>
    </table>

<style>
.description {
    background: linear-gradient(135deg, #f7f9fb 0%, #e9ecef 100%);
    padding: 2em;
    margin: 2em 0;
    text-align: left;
    border-radius: var(--radius-md);
    border-left: 5px solid var(--secondary-color);
    box-shadow: var(--shadow-md);
}

.description h3 {
    margin-top: 0;
    margin-bottom: 1em;
    color: var(--text-primary);
}

.description p {
    margin: 0;
    color: var(--text-secondary);
    line-height: 1.8;
    font-size: 1.05em;
}

.ranking-table tbody td:first-child {
    text-align: center;
}
</style>
{% endblock %}
